$('.status').on('click', function() {
  var $linkId = $(this).parent().parent().data('id');
  var $linkStatus = $(this).data('read');

  $.ajax({
    url: '/links/' + $linkId,
    type: "PATCH",
    data: { link: { read: $linkStatus } },
    success: function(data) {
      var id     = data.id;
      var $link = $('.link[data-id=' + id + ']')
      var $title = $link.find('.title');
      var $status = $link.find('.status');
      var title  = data.title;
      var status = '';
      if (data.read) {
        status = 'Mark as Unread';
      } else {
        status = 'Mark as Read';
      }

      $title.toggleClass('read');
      $status.innerHTML = status;
      $status.data('read', data.read);
    }
  });
});
